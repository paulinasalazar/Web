    <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset = "UTF-8">
  <meta name = "viewport" content = "width-device-width", initial-scale = 1"
  <title> Calendario </title>
  <style>
    :root {
      --bg: #0f172a;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --ring: #334155;
      -ok: #22c55e;
      --warn: #f59e0b;
    }
    *{ box-sizing:border-box; }
    html, body {100%}
    body {
      margin: 0;
      font family: ui-sans-srif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segeo UI Emoji";
      backround: radial-gradient(1200px 800px at 10% -10%, #1e293b 0, #0b1220 50%, #060b13 100%), var(--bg);
      color: var (--text);
    }
    .container {
      max-width: 1100px;
      margin: 32px auto 80px;
      padding: 0 16px;
    }
    header {
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 20px;
    }
    h1 {font-size: 24px; margin: 0 auto; letter-spacing: 0.3px; }
    .sub { color: var(--muted); font-size: 14px; margin-top: 4px; }
    .nav {   
      display:flex; gap: 8px; align-items: center;
    }
    .btn {
      backround: #0b1220;
      border: 1px solid var(--ring);
      padding: 8px 12px;
      border - radius: 12px;
      border radius: 12 px;
      cursor:pointer;
      transition: transform .05s ease, border-cpolor .2s ease;
      user-select:none
    }
    .btn:hover {border-color: #475569; }
    .btn:active {transform:translateY (1px);}
    .calendar {
      Backround: #0b1120;
      border: 1px solid var(--ring);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .weekdays, .grid div {
      display: grid;                      
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }  
    .weedays div{
      text-align: center; color: var(--muted); font size: 12px; letter-spacing: .5px; text-transform: uppercase;
    }
    .day {
      border: 1px; solid var(--ring);
      border-radius: 14px;
      aspect-ratio: 1/1;
      display: flex;
      align-items:flex-start; 
      justify-content: flex-end;
      padding: 8px; 
      position: relative; 
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
      cursor: pointer; 
      transition: border-color .2s ease, box-shadow .2s ease, transform .06s ease;
    }
    .day:hover { border-color: #526581; box-shadow: 0 6px 18px rgba(2,6,23,.35); }
    .day.disabled { opacity: .3; cursor: default; } 
    .pill { 
      position: absolute; bottom: 8px; left: 8px; 
      display: inline-flex; gap: 6px
    }
    .badge { 
      width: 8px; height: 8px; border-radius: 999px; border: 1px solid var(--ring); 
      background: #0b1220; 
    }
  .bage.ok {background: var(--ok); }
  .bade.warn {background: var(--warn); }
  .day.complete { outline: 2px solid rgba(34,197,94,.6); box-shadow: 0 0 0 4px rgba(34,197,94,.12) inset; } 
  .legend { display:flex; gap: 10px; align-items: center; color: var(--muted); font-size: 12px; margin-top: 10px; } /* Leyenda */
  .legend .item { display:flex; gap: 6px; align-items: center; }
  .modal-backdrop { 
  position: fixed; inset: 0; background: rgba(2,6,23,.7); 
  display: none; align-items: center; justify-content: center; padding: 16px; z-index: 50; 
  }
  .modal-backdrop.show { display: flex; }
  .modal {
    width: 100%; max-width: 720px; 
    background: #0b1220; border: 1px solid var(--ring); border-radius: 16px;
    box-shadow: 0 24px 60px rgba(0,0,0,.5);
    padding: 16px; 
  }
  .modal header { margin-bottom: 10px; } 
  .modal h2 { margin: 0; font-size: 18px; }
  .section { border-top: 1px solid var(--ring); padding: 14px 0; }
  .section:first-of-type { border-top: 0; } 
  .section h3 { margin: 0 0 10px 0; font-size: 14px; color: var(--muted); text-transform: uppercase; letter-spacing: .7px; }
  .row { display: flex; flex-wrap: wrap; gap: 10px 16px; align-items: center; } 
  .chk { 
  display: inline-flex; align-items: center; gap: 8px; 
  padding: 8px 10px; border: 1px solid var(--ring); border-radius: 12px; cursor: pointer; 
  transition: border-color .2s ease, background .2s ease;
  user-select: none; 
  }
  .chk:hover { border-color: #526581; }
  .chk input[type="checkbox"] { 
  width: 18px; height: 18px; accent-color: var(--ok); 
  }
  .chk.done { background: rgba(34,197,94,.12); border-color: rgba(34,197,94,.45); } 
  .grid-mini { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; } 
  .dot { 
  width: 28px; height: 28px; border-radius: 12px; display: inline-flex; align-items: center; justify-content: center;
  border: 1px solid var(--ring); cursor: pointer; font-size: 12px; color: var(--muted); 
  transition: background .2s ease, border-color .2s ease; 
  }
  .dot.on { background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.45); color: #d1fae5; }
  .foot { display:flex; justify-content: space-between; gap: 8px; margin-top: 10px; } 
  .link { color: var(--primary); text-decoration: none; }
  </style>
</head>

<body>
  <div class= "container">
    <header>
      <div>
        <h1>Calendario </h1>
      </div>
      <div class="nav">
        <button class="btn" id="prevMonth" aria-label="Mes anterior">◀</button>
        <div id="monthLabel" class="sub" style="min-width: 160px; text-align:center"></div>
        <button class="btn" id="nextMonth" aria-label="Mes siguiente">▶</button>
      </div>
    </header>

    <div class="calendar">
        <div class="weekdays">  
          <div>Lun</div><div>Mar</div><div>Mié</div><div>Jue</div><div>Vie</div><div>Sáb</div><div>Dom</div> 
        </div> 
        <div class="grid" id="calendarGrid" style="margin-top:10px"></div> 
    </div>
    <div class="modal-backdrop" id="modal">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <header> 
          <h2 id="modalTitle"> Día </h2>
        </header>
        <div class="section" id="sec-dieta"  
          <h3> Dieta </h3>
          <div class="row">  
            <div class="sub" style="margin-bottom:6px"> Cereales </div>
            <div class="grid-mini" id="cerealesDots"></div>
          </div>
          <div>
            <div class="sub" style=margin-bottom: 6px"> Carne </div
            <div class="grid-mini" style="grid-template-columns: repeat(7,1fr)" id="carneDots"> </div>                                                   
          </div>
          <div>
            <div class="sub" style="margin-bottom: 6px"> Grasas </div>
            <div class="grid-mini" style="grid-template-columns: repeat(5,1fr)" id="grasasDots" </div>
            </div>
          </div>
          <div>
            <div class="sub" style=margin-bottom: 6px"> Verduras </div
            <div class="grid-mini" style="grid-template-columns: repeat(4,1fr)" id="verdurasDots"> </div>                                                   
          </div>
          <div>
            <div class="sub" style="margin-bottom: 6px"> Azúcar </div>
            <div class="grid-mini" style="grid-template-columns: repeat(2,1fr)" id="azucarDots"> </div>
          </div>
        </div>
        <div class="section" id="sec-sup">
          <h3> Suplementos </h3>       
          <div class="row">
            <label class="chk" id="vitLabel"><input type="checkbox" id="vitChk" /><span>Vitaminas</span></label> 
            <label class="chk" id="creLabel"><input type="checkbox" id="creChk" /><span>Creatina</span></label>
            <label calss="chk" id="proLabel"><input type="checkbox" id="proChk" /><span>Proteina</span></label>
          </div>
        </div>
        <div class="section" id="sec-ej"> 
          <h3>Ejercicio</h3> 
          <label class="chk" id="ejLabel"> 
            <input type="checkbox" id="ejercicioChk" />
          </label> 
        </div>
        <div class="section" id="sec-hid"> 
          <h3>Hidratación</h3>
          <label class="chk" id="hidLabel"> </label> 
        </div>
        <div class="foot"> 
          <button class="btn" id="closeBtn">Cerrar</button> 
          <a class="link" href="#" id="clearDay">Borrar</a>
        </div> 
      </div>
    </div>
    <script>
      const pad = n => String(n).pad.Start(2, '0');
      const ymd = d => `${d.getFullYear()}-{pad(d.getMonth()+1}-$pad.getDate())}`
      let current = new Date(); // Fecha actual
      current.setDate(1); // Fijamos el día 1 para centrar el mes visible
      let selectedKey = null;
      const defaultDay = () => ({ 
        ejercicio: false, // Sin ejercicio al inicio
        suplementos: { vitaminas: false, creatina: false, proteina: false }, // Tres checks
        dieta: { cereales: [false,false,false,false,false], azucar: [false,false] }, // 5 + 2 puntos
        hidratacion: false 
      });
      function loadDay(key){ // Carga el estado de un día
        const raw = localStorage.getItem('habit:'+key); // Lee del almacenamiento local
        return raw ? JSON.parse(raw) : defaultDay(); // Devuelve lo guardado o el default
      }
      function saveDay(key, data){ // Guarda el estado de un día
        localStorage.setItem('habit:'+key, JSON.stringify(data)); 
      }
      function clearDay(key){ 
        localStorage.removeItem('habit:'+key); 
      }
      function isCompleteDay(state){ // Regla: cuándo un día está completo (verde)
        const sup = state.suplementos; // Acceso corto
        const suplementosOk = sup.vitaminas && sup.creatina && sup.proteina; // Los 3 marcados
        return state.ejercicio && suplementosOk && state.hidratacion; // Ejercicio + Suplementos + Hidratación
      }
      function renderMonth(){ // Dibuja el mes en pantalla
        const y = current.getFullYear(); // Año actual mostrado
        const m = current.getMonth(); // Mes actual mostrado
        monthLabel.textContent = `${monthNames[m]} ${y}`; // Texto "Mes Año"
        grid.innerHTML = ''; // Limpia la grilla
        const first = new Date(y, m, 1); // Primer día del mes
        const last = new Date(y, m+1, 0); // Último día del mes

        const blanks = weekdayOffset(first.getDay()); // Cálculo de huecos
        for(let i=0;i<blanks;i++){ // Inserta divs vacíos
        const div = document.createElement('div'); // Crea un hueco
        grid.appendChild(div); // Lo añade al grid
      }
      for(let d=1; d<=last.getDate(); d++){ // Itera cada día numérico
        const cell = document.createElement('button'); // Crea un botón/celda
        cell.className = 'day'; // Clase visual de día
        const date = new Date(y, m, d); // Fecha concreta
        const key = ymd(date); // Clave YYYY-MM-DD
        cell.setAttribute('data-key', key); // Guarda la clave en atributo
        cell.innerHTML = `
          <span class="day-number">${d}</span>
          <span class="pill">
            <span class="badge" data-badge="ej"></span>
            <span class="badge" data-badge="sup"></span>
            <span class="badge" data-badge="hid"></span>
          </span>
`        ;
        const state = loadDay(key); 
        cell.querySelector('[data-badge="ej"]').classList.toggle('ok', state.ejercicio); // Verde si ejercicio
        const supOk = state.suplementos.vitaminas || state.suplementos.creatina || state.suplementos.proteina; // Algún suplemento marcado
        cell.querySelector('[data-badge="sup"]').classList.toggle('warn', supOk && ! (state.suplementos.vitaminas && state.suplementos.creatina && state.suplementos.proteina)); // Ámbar si parcial
        cell.querySelector('[data-badge="sup"]').classList.toggle('ok', state.suplementos.vitaminas && state.suplementos.creatina && state.suplementos.proteina); // Verde si los 3
        cell.querySelector('[data-badge="hid"]').classList.toggle('ok', state.hidratacion); // Verde si hidratación

        if (isCompleteDay(state)) cell.classList.add('complete'); // Resalta el día si se cumple la regla


        cell.addEventListener('click', () => openDayModal(key)); // Al hacer clic, abre el modal de ese día
        grid.appendChild(cell); // Añade la celda al calendario
      }
    }  
    const modal = document.getElementById('modal'); // Backdrop del modal
    const title = document.getElementById('modalTitle'); // Título del modal
    const closeBtn = document.getElementById('closeBtn'); // Botón cerrar
    
    const ejercicioChk = document.getElementById('ejercicioChk'); // Check de ejercicio
    const vitChk = document.getElementById('vitChk'); // Check vitaminas
    const creChk = document.getElementById('creChk'); // Check creatina
    const proChk = document.getElementById('proChk'); // Check proteína
    const hidChk = document.getElementById('hidChk'); // Check hidratación
      
    const ejercicioLabel = document.getElementById('ejercicioLabel'); // Chip de ejercicio
    const vitLabel = document.getElementById('vitLabel'); // Chip vitaminas
    const creLabel = document.getElementById('creLabel'); // Chip creatina
    const proLabel = document.getElementById('proLabel'); // Chip proteína
    const hidLabel = document.getElementById('hidLabel'); // Chip hidratación
    const cerealesDots = document.getElementById('cerealesDots'); // Contenedor de 5 puntos
    const azucarDots = document.getElementById('azucarDots'); // Contenedor de 2 puntos
    const clearDayBtn = document.getElementById('clearDay'); // Enlace para limpiar el día
     
    function buildDots(container, count){ // Construye N botones .dot
      container.innerHTML = ''; // Limpia contenedor
      for(let i=0;i<count;i++){ // Repite N veces
        const b = document.createElement('button'); // Crea un botón
        b.type = 'button'; // Evita submit
        b.className = 'dot'; // Estilo .dot
        b.textContent = i+1; // Muestra 1..N
        container.appendChild(b); // Añade al contenedor
      }
    }
    buildDots(cerealesDots, 5); // Crea 5 puntos para cereales
    buildDots(carneDots, 2);
    buildDots(grasasDots, 5); // Crea 5 puntos para cereales
    buildDots(verdurasDots, 2);
    buildDots(azucarDots, 2);
    function syncLabelStyles(state){ // Pone/quita estilo .done según estado
      ejercicioLabel.classList.toggle('done', state.ejercicio); // Ejercicio
      vitLabel.classList.toggle('done', state.suplementos.vitaminas); // Vitaminas
      creLabel.classList.toggle('done', state.suplementos.creatina); // Creatina
      proLabel.classList.toggle('done', state.suplementos.proteina); // Proteína
      hidLabel.classList.toggle('done', state.hidratacion); // Hidratación
    }
    function openDayModal(key){ // Abre el modal para una fecha
      selectedKey = key; // Guarda la clave
      const date = new Date(key); // Crea fecha desde la clave
      title.textContent = date.toLocaleDateString('es-ES', { weekday:'long', day:'2-digit', month:'long', year:'numeric' }); // Título legible
  
      const state = loadDay(key); // Lee estado
      ejercicioChk.checked = state.ejercicio; // Sincroniza check
      vitChk.checked = state.suplementos.vitaminas; // idem vitaminas
      creChk.checked = state.suplementos.creatina; // idem creatina
      proChk.checked = state.suplementos.proteina; // idem proteína
      hidChk.checked = state.hidratacion; // idem hidratación
  
      syncLabelStyles(state); // Actualiza estilo de chips
  
      [...cerealesDots.children].forEach((el,i)=> el.classList.toggle('on', !!state.dieta.cereales[i])); // 5 puntos
      [...carneDots.children].forEach((el,i)=> el.classList.toggle('on', !!state.dieta.azucar[i])); // 2 puntos
      [...grasasDots.children].forEach((el,i)=> el.classList.toggle('on', !!state.dieta.cereales[i])); // 5 puntos
      [...azucarDots.children].forEach((el,i)=> el.classList.toggle('on', !!state.dieta.azucar[i])); // 2 puntos
      [...verdurasDots.children].forEach((el,i)=> el.classList.toggle('on', !!state.dieta.cereales[i])); // 5 puntos
      modal.classList.add('show'); // Muestra el modal
    }
      
    </script>
              
          
      
        
  



    


















