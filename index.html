<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calendario</title>
<style>
:root {
--bg: #FEFBF8;
--text: #1a1a2e;
--muted: #6b6b7a;
--ring: #ffd6e8;
--ok: #22c55e;
--warn: #f59e0b;
--day-bg: #fff3f8;
--day-hover: #ffe1ef;
--shadow: rgba(0,0,0,0.08);
}
* { box-sizing: border-box; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: "Inter", ui-sans-serif, system-ui;
}


.container { max-width: 1100px; margin: 32px auto 80px; padding: 0 16px; }
header { display: flex; align-items: center; justify-content: space-between; }


h1 { margin: 0 auto; font-size: 26px; font-weight: 600; }


.btn {
background: transparent;
border: 1px solid var(--ring);
padding: 6px 12px;
border-radius: 10px;
cursor: pointer;
color: var(--text);
transition: .2s ease;
}
.btn:hover { background: #ffeaf2; }


.calendar {
background: var(--bg);
border-radius: 16px;
padding: 16px;
box-shadow: 0 4px 20px var(--shadow);
}


.weekdays, .grid {
display: grid;
grid-template-columns: repeat(7, 1fr);
gap: 8px;
}
.weekdays div {
text-align: center;
color: var(--muted);
font-size: 12px;
text-transform: uppercase;
letter-spacing: 1px;
}
.day {
  border: none;
  background: var(--day-bg);
  border-radius: 12px;
  aspect-ratio: 1/1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  cursor: pointer;
  transition: background .2s ease, transform .1s ease;
  color: var(--text);
  box-shadow: 0 2px 6px var(--shadow);
}
.day:hover {
background: var(--day-hover);
transform: translateY(-2px);
}


.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 16px;
  z-index: 50;
}
.modal-backdrop.show { display: flex; }
.modal {
  width: 100%; max-width: 720px;
  background: var(--bg);
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 8px 30px rgba(0,0,0,.25);
}


.section { border-top: 1px solid var(--ring); padding: 14px 0; }
.section h3 { margin: 0 0 10px; font-size: 14px; color: var(--muted); letter-spacing: 1px; text-transform: uppercase; }
.chk {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
  border: none !important;
  background: transparent !important;
  font-size: 15px;
}
.chk input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--ok); }
.grid-mini {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(32px, 1fr));
gap:0px;
}


.dot {
width: 32px;
height: 32px;
border-radius: 8px;
border: 1px solid var(--ring);
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
font-size: 14px;
background: transparent;
transition: .2s;
}
.dot.on {
background: #ffd0e2;
border-color: #ff9bbb;
}
</style>
</head>
<body>
<div class="container">
<header>
  <h1>Calendario</h1>
  <div class="nav">
    <button class="btn" id="prevMonth">◀</button>
    <div id="monthLabel" class="sub" style="min-width:140px;text-align:center"></div>
    <button class="btn" id="nextMonth">▶</button>
</div>
</header>
<div class="calendar">
  <div class="weekdays">
    <div>Lun</div><div>Mar</div><div>Mié</div><div>Jue</div><div>Vie</div><div>Sáb</div><div>Dom</div>
  </div>
<div class="grid" id="calendarGrid" style="margin-top:10px"></div>
</div>


<div class="modal-backdrop" id="modal">
<div class="modal">
<header><h2 id="modalTitle">Día</h2></header>
<div class="section">
<h3>Dieta</h3>
<div class="sub">Cereales</div>
<div class="grid-mini" id="cerealesDots"></div>


<div class="sub">Carnes</div>
<div class="grid-mini" id="carnesDots"></div>


<div class="sub">Grasas</div>
<div class="grid-mini" id="grasasDots"></div>


<div class="sub">Verduras</div>
<div class="grid-mini" id="verdurasDots"></div>
<div class="sub">Azúcares</div>
<div class="grid-mini" id="azucarDots"></div>
</div>


<div class="section">
<h3>Suplementos</h3>
<label class="chk"><input type="checkbox" id="vitChk"> Vitaminas</label>
<label class="chk"><input type="checkbox" id="creChk"> Creatina</label>
<label class="chk"><input type="checkbox" id="proChk"> Proteína</label>
</div>
<div class="section">
<h3>Ejercicio</h3>
<label class="chk"><input type="checkbox" id="ejercicioChk"></label>
</div>


<div class="section">
<h3>Hidratación</h3>
<label class="chk"><input type="checkbox" id="hidChk"></label>
</div>


<div style="display:flex;justify-content:space-between;margin-top:10px;">
<button class="btn" id="closeBtn">Cerrar</button>
<button class="btn" id="clearDay">Borrar</button>
</div>
</div>
</div>


<script>
const pad = n => String(n).padStart(2,'0');
const ymd = d => `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;


const monthNames=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];


let current=new Date();
current.setDate(1);


const calendarGrid=document.getElementById('calendarGrid');
const monthLabel=document.getElementById('monthLabel');


function defaultDay(){return{
ejercicio:false,
suplementos:{ vitaminas:false,creatina:false,proteina:false},
dieta:{cereales:[0,0,0,0,0],carnes:[0,0,0,0,0,0,0],grasas:[0,0,0,0,0],verduras:[0,0,0,0],azucar:[0,0]},
hidratacion:false
};}


function storageKey(k){return 'habit:'+k;}
function loadDay(k){let r=localStorage.getItem(storageKey(k));return r?JSON.parse(r):defaultDay();}
function saveDay(k,d){localStorage.setItem(storageKey(k),JSON.stringify(d));}
function clearDay(k){localStorage.removeItem(storageKey(k));}
function weekdayOffset(js){return(js+6)%7;}
function renderMonth(){
  const y=current.getFullYear(),m=current.getMonth();monthLabel.textContent=`${monthNames[m]} ${y}`;
  calendarGrid.innerHTML='';const first=new Date(y,m,1),last=new Date(y,m+1,0);const blanks=weekdayOffset(first.getDay());
  for(let i=0;i<blanks;i++)calendarGrid.appendChild(document.createElement('div'));
  for(let d=1;d<=last.getDate();d++){const cell=document.createElement('button');cell.className='day';
       const date=new Date(y,m,d);
      const key=ymd(date);cell.dataset.key=key;cell.textContent=d;cell.onclick=()=>openDay(key);
      const state = loadDay(key);
const supOK = state.suplementos.vitaminas && state.suplementos.creatina && state.suplementos.proteina;
const fullComplete = state.ejercicio && supOK && state.hidratacion;

if (fullComplete) {
    cell.style.background = "#d4f8da";  // verde suave
    cell.style.border = "2px solid #22c55e";
}
      calendarGrid.appendChild(cell);}}
document.getElementById('prevMonth').onclick=()=>{current.setMonth(current.getMonth()-1);renderMonth();};
document.getElementById('nextMonth').onclick=()=>{current.setMonth(current.getMonth()+1);renderMonth();};
function makeDots(arr,container,onClick){
container.innerHTML='';
arr.forEach((v,i)=>{
const dot=document.createElement('div');
dot.className='dot'+(v?' on':'');
dot.textContent=i+1;
dot.onclick=()=>onClick(i);
container.appendChild(dot);
});
}


let activeKey=null;
function openDay(key){
activeKey=key;
const d=loadDay(key);
modalTitle.textContent=key;


makeDots(d.dieta.cereales,document.getElementById('cerealesDots'),i=>{d.dieta.cereales[i]=!d.dieta.cereales[i];saveDay(key,d);openDay(key);});
makeDots(d.dieta.carnes,document.getElementById('carnesDots'),i=>{d.dieta.carnes[i]=!d.dieta.carnes[i];saveDay(key,d);openDay(key);});
makeDots(d.dieta.grasas,document.getElementById('grasasDots'),i=>{d.dieta.grasas[i]=!d.dieta.grasas[i];saveDay(key,d);openDay(key);});
makeDots(d.dieta.verduras,document.getElementById('verdurasDots'),i=>{d.dieta.verduras[i]=!d.dieta.verduras[i];saveDay(key,d);openDay(key);});
makeDots(d.dieta.azucar,document.getElementById('azucarDots'),i=>{d.dieta.azucar[i]=!d.dieta.azucar[i];saveDay(key,d);openDay(key);});
  document.getElementById('vitChk').checked=d.suplementos.vitaminas;
document.getElementById('creChk').checked=d.suplementos.creatina;
document.getElementById('proChk').checked=d.suplementos.proteina;
document.getElementById('ejercicioChk').checked=d.ejercicio;
document.getElementById('hidChk').checked=d.hidratacion;


modal.classList.add('show');
}
 document.getElementById('vitChk').onchange=()=>{let d=loadDay(activeKey);d.suplementos.vitaminas=!d.suplementos.vitaminas;saveDay(activeKey,d);};
document.getElementById('creChk').onchange=()=>{let d=loadDay(activeKey);d.suplementos.creatina=!d.suplementos.creatina;saveDay(activeKey,d);};
document.getElementById('proChk').onchange=()=>{let d=loadDay(activeKey);d.suplementos.proteina=!d.suplementos.proteina;saveDay(activeKey,d);};
document.getElementById('ejercicioChk').onchange=()=>{let d=loadDay(activeKey);d.ejercicio=!d.ejercicio;saveDay(activeKey,d);};
document.getElementById('hidChk').onchange=()=>{let d=loadDay(activeKey);d.hidratacion=!d.hidratacion;saveDay(activeKey,d);};


document.getElementById('closeBtn').onclick=()=>modal.classList.remove('show');
document.getElementById('clearDay').onclick=()=>{clearDayData(activeKey);modal.classList.remove('show');};


renderMonth();
</script> 
